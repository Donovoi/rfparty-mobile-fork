<!DOCTYPE html>

<html>

  <head>
    <meta http-equiv="Content-Security-Policy"
      content="default-src *; style-src 'self' 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'; img-src * data: blob:">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport"
      content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <title>rfparty</title>

    <link rel="stylesheet" href="./node_modules/leaflet/dist/leaflet.css" />

    <link rel="stylesheet" href="./src/main.css" />
  </head>

  <!--<body onload="MainWindow.onload('map')">-->

  <body>
    <div id='modal-shadow' class='modal-shadow'></div>
    <div class='header' id='header'>
      rfparty
    </div>

    <div class='search-bar'>
      <input id='search-input' class='search-input' type="search" placeholder="search" disabled />
      <div class="search-clear" id="search-clear" onclick="document.getElementById('search-input').value=null">X</div>
    </div>
    <span id='search-hint' class='search-hint hidden'></span>
    <span id='search-status' class='search-status hidden'></span>

    <div class="status-area">
      <span id='status-text'>Status</span><span id='status-dot' class='green-dot'></span>
    </div>

    <div id='center-modal' class="center-modal">
      <div class="rainbows hidden" id='logo'>rfparty</div>



      <div id='loading-bar' class='loading-bar hidden'>
        <center><span id='loading-text'>Loading <span id='loading-value'>0</span>%</span></center>
        <progress id="loading-progress-bar" class='loading-progress-bar' max="100" value="0"></progress>
        <button id='loading-start-button' class='loading-start-button hidden'
          onclick='MainWindow.reload()'>Start</button>
        <textarea id='loading-details' class='loading-details' readonly disabled>
          </textarea>
        <br />
        <center>
          <a class="large-link" href="#"
            onclick="window.open('https://www.dataparty.xyz/rfparty/privacy-policy.html', '_system'); return false;">Privacy
            Policy</a>
        </center>
      </div>
    </div>

    <div id="device-info" class='device-info hidden'>
      <div class="device-info-header">
        <span class="close" onclick="window.MainWindow.hideDiv('device-info')">X</span>
        <button id="device-info-copy" class="copy-btn" onclick="window.MainWindow.copyDeviceInfo()">ðŸ“‹ Copy</button>
      </div>
      <h3 id='device-info-name'>name</h3>
      <span id='device-info-duration'>duration</span><br>
      <span id='device-info-address'>address</span><br>
      <span id='device-info-company'>company</span><br>

      <div id='device-info-rssi-section' class='rssi-section'>
        <h4>Signal Strength</h4>
        <div class='rssi-display'>
          <span class='rssi-label'>Best:</span>
          <span id='device-info-best-rssi' class='rssi-value'>--</span>
          <span class='rssi-unit'>dBm</span>
          <span id='device-info-best-distance' class='distance-estimate'></span>
        </div>
        <div class='rssi-display'>
          <span class='rssi-label'>Worst:</span>
          <span id='device-info-worst-rssi' class='rssi-value'>--</span>
          <span class='rssi-unit'>dBm</span>
          <span id='device-info-worst-distance' class='distance-estimate'></span>
        </div>
        <div class='distance-confidence' id='device-info-distance-confidence'></div>
      </div>

      <h4>Services</h4>

      <span id='device-info-services'></span>
      <div id='device-info-details' class='device-info-details'>
        <div id='device-info-detailscontainer'></div>
      </div>
    </div>

    <div id="map" class="content"></div>

    <!-- RSSI Signal Strength Legend -->
    <div id="rssi-legend" class="rssi-legend">
      <div class="rssi-legend-title">Signal Strength</div>
      <div class="rssi-legend-item">
        <div class="rssi-legend-dot" style="background: #00ff00;"></div>
        <span>Excellent (-50+)</span>
      </div>
      <div class="rssi-legend-item">
        <div class="rssi-legend-dot" style="background: #ffff00;"></div>
        <span>Good (-60 to -70)</span>
      </div>
      <div class="rssi-legend-item">
        <div class="rssi-legend-dot" style="background: #ffa500;"></div>
        <span>Fair (-70 to -80)</span>
      </div>
      <div class="rssi-legend-item">
        <div class="rssi-legend-dot" style="background: #ff0000;"></div>
        <span>Weak (-90+)</span>
      </div>
    </div>

    <!-- The Modal -->
    <div id="setup-modal" class="modal hidden">

      <!-- Modal content -->
      <div class="modal-content">
        <form name="setupForm">
          <div class="modal-header">
            <span class="close">&times;</span>
            <h2>Setup</h2>
          </div>
          <div class="modal-body">

            <p>
              <center><button class='setup-submit' type="submit">load</button></center>
            </p>
          </div>
        </form>
      </div>

    </div>



    <footer class='footer-left'>
      <span><span class='footer-logo'>rfparty</span> - <span id='version-text'></span> </span>

    </footer>

    <!--<footer class='footer-right'>
        <small>map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a></small>
      </footer>-->

    <div id="boot-status" class="boot-status hidden"></div>

    <script>
      // Polyfill global for Node.js modules bundled for browser
      if (typeof global === 'undefined') {
        window.global = window;
      }
    </script>

    <script>
      (function () {
        var el = document.getElementById('boot-status')
        if (!el) { return }

        function log(msg, isError) {
          try {
            var line = document.createElement('div')
            line.textContent = msg
            el.appendChild(line)
            // Only show console on errors, not normal boot messages
            if (isError) {
              el.classList.remove('hidden')
            }
          } catch (err) { }
        }

        window.__bootLog = function (msg) { log(msg, false); }
        window.__bootError = function (msg) { log(msg, true); }
        log('boot: html loaded', false)

        window.addEventListener('error', function (event) {
          log('error: ' + (event && event.message ? event.message : 'unknown'), true)
        })

        window.addEventListener('unhandledrejection', function (event) {
          var reason = (event && event.reason && event.reason.message) ? event.reason.message : String(event && event.reason ? event.reason : 'unknown')
          log('promise: ' + reason, true)
        })

        setTimeout(function () {
          if (!window.__booted) {
            log('boot: waiting for app.js', true)
          }
        }, 3000)
      })()
    </script>

    <script type="text/javascript" src="./cordova.js"></script>
    <script src="./dataparty-browser.js" data-parcel-ignore></script>
    <script src="src/app.js" type="module"></script>

  </body>

</html>